{"version":3,"sources":["webpack:///./src/components/analysis/CountryCompareSection.vue?78cf","webpack:///src/components/analysis/CountryCompareSection.vue","webpack:///./src/components/analysis/CountryCompareSection.vue?ee1f","webpack:///./src/components/analysis/CountryCompareSection.vue","webpack:///./src/components/common/DataSwitch.vue?9f6f","webpack:///./src/components/common/DataSwitch.vue?61a9","webpack:///src/components/common/DataSwitch.vue","webpack:///./src/components/common/DataSwitch.vue?3a54","webpack:///./src/components/common/DataSwitch.vue?1866"],"names":["render","_vm","this","_h","$createElement","_c","_self","series","dates","staticClass","staticStyle","attrs","dataType","on","$event","_v","_s","$t","selectedCountries","length","options","_e","countryListFiltered","model","value","callback","$$v","expression","staticRenderFns","name","props","components","VueApexCharts","vSelect","DataSwitch","data","mounted","window","calculatedCountryData","countryList","slice","setImmediate","console","time","timeEnd","watch","getSeries","ga","methods","country","countryData","a","confirmed","death","cured","toPrecision","dateArr","map","d","computed","chart","id","height","type","stacked","zoom","enabled","innerWidth","tooltip","shared","intersect","x","formatter","val","stroke","width","grid","row","colors","opacity","xaxis","categories","labels","rotate","yaxis","logarithmic","decimalsInFloat","component","class","disabled","_l","key","active","$emit","updateOptions","isUk"],"mappings":"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","file":"js/chunk-30abf196.3d73b9d1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.series && _vm.dates)?_c('div',{staticClass:\"mBlock\",staticStyle:{\"color\":\"grey\"}},[_c('DataSwitch',{attrs:{\"data-type\":_vm.dataType},on:{\"typeChange\":function($event){_vm.dataType = $event}}}),_c('div',{staticStyle:{\"padding-bottom\":\"10px\",\"font-size\":\"12px\"}},[_vm._v(\"*\"+_vm._s(_vm.$t(\"compareNote\")))]),(_vm.selectedCountries.length>0)?_c('VueApexCharts',{attrs:{\"width\":\"100%\",\"height\":\"320\",\"type\":\"line\",\"options\":_vm.options,\"series\":_vm.series}}):_vm._e(),_vm._v(\" \"+_vm._s(_vm.$t(\"compareSelect\"))+\" \"),_c('v-select',{attrs:{\"multiple\":\"\",\"placeholder\":\"Select countries to compare\",\"label\":\"countries\",\"options\":_vm.countryListFiltered,\"selectable\":function () { return _vm.selectedCountries.length < 10; }},model:{value:(_vm.selectedCountries),callback:function ($$v) {_vm.selectedCountries=$$v},expression:\"selectedCountries\"}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div v-if=\"series && dates\" class=\"mBlock\" style=\"color: grey\">\n    <DataSwitch :data-type=\"dataType\" @typeChange=\"dataType = $event\"></DataSwitch>\n\n    <div style=\"padding-bottom: 10px;font-size: 12px;\">*{{$t(\"compareNote\")}}</div>\n\n    <VueApexCharts\n      width=\"100%\"\n      height=\"320\"\n      type=\"line\"\n      :options=\"options\"\n      :series=\"series\"\n      v-if=\"selectedCountries.length>0\"\n    ></VueApexCharts>\n    {{$t(\"compareSelect\")}}\n    <v-select\n      multiple\n      placeholder=\"Select countries to compare\"\n      label=\"countries\"\n      v-model=\"selectedCountries\"\n      :options=\"countryListFiltered\"\n      :selectable=\"() => selectedCountries.length < 10\"\n    />\n  </div>\n</template>\n\n<script>\nimport VueApexCharts from \"vue-apexcharts\";\nimport vSelect from \"vue-select\";\nimport DataSwitch from \"../common/DataSwitch\";\nimport { getCountryCompareData } from \"../../js/locationUtils\";\nexport default {\n  name: \"CountryCompareSection\",\n  props: [\"globalData\", \"countryList\"],\n  components: {\n    VueApexCharts,\n    vSelect,\n    DataSwitch,\n  },\n  data: function () {\n    return {\n      countryListFiltered: [],\n      selectedCountries: [\n        \"United Kingdom\",\n        \"Spain\",\n        \"France\",\n        \"Italy\",\n        \"Germany\",\n      ],\n      dates: null,\n      dataType: \"confirmed\",\n      series: null,\n    };\n  },\n  mounted() {\n    if (!window.calculatedCountryData) {\n      window.calculatedCountryData = {};\n    }\n    this.countryListFiltered = this.countryList.slice(3);\n    setImmediate(() => {\n      console.time(\"series\");\n      this.getSeries();\n      console.timeEnd(\"series\");\n    });\n  },\n  watch: {\n    selectedCountries: function () {\n      this.getSeries();\n      window.ga(\n        \"send\",\n        \"event\",\n        \"compare\",\n        \"countries-loaded\",\n        this.selectedCountries.toString()\n      );\n    },\n    dataType: function () {\n      this.getSeries();\n      window.ga(\"send\", \"event\", \"compare\", \"type-changed\", this.dataType);\n    },\n  },\n  methods: {\n    getSeries: function () {\n      if (this.selectedCountries.length === 0) return [];\n      let data = this.selectedCountries.map((country) => {\n        let countryData;\n        if (window.calculatedCountryData[country]) {\n          countryData = window.calculatedCountryData[country];\n        } else {\n          countryData = getCountryCompareData(this.globalData, country, 50);\n          window.calculatedCountryData[country] = countryData;\n        }\n        return {\n          name: country,\n          data: countryData?.map((a) => {\n            if (this.dataType === \"active\") {\n              return a.confirmed - a.death - a.cured;\n            } else if (this.dataType === \"dRate\") {\n              return (a.death / a.confirmed).toPrecision(2);\n            } else if (this.dataType === \"cRate\") {\n              return (a.cured / a.confirmed).toPrecision(2);\n            } else {\n              return a[this.dataType];\n            }\n          }),\n        };\n      });\n      // console.log(data);\n      let maxLen = Math.max.apply(\n        Math,\n        data.map((a) => a.data.length)\n      );\n      let dateArr = Array.from(Array(maxLen).keys());\n      // ref https://stackoverflow.com/questions/3746725/\n      // eslint-disable-next-line vue/no-side-effects-in-computed-properties\n      this.dates = dateArr.map((d) => {\n        return \"D\" + d;\n      });\n      this.series = data;\n    },\n  },\n  computed: {\n    options: function () {\n      return {\n        chart: {\n          id: \"cc\",\n          height: 320,\n          type: \"line\",\n          stacked: false,\n          zoom: {\n            enabled: window.innerWidth > 800,\n          },\n        },\n        tooltip: {\n          shared: true,\n          intersect: false,\n          x: {\n            formatter: (val) => {\n              return \"Day \" + val;\n            },\n          },\n        },\n        stroke: {\n          width: 3,\n        },\n        grid: {\n          row: {\n            colors: [\"#f3f3f3\", \"transparent\"], // takes an array which will be repeated on columns\n            opacity: 0.5,\n          },\n        },\n        xaxis: {\n          type: \"text\",\n          categories: this.dates,\n          labels: {\n            rotate: -10,\n          },\n        },\n        yaxis: {\n          logarithmic: false,\n          decimalsInFloat: 2,\n        },\n      };\n    },\n  },\n};\n</script>\n\n<style scoped>\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CountryCompareSection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CountryCompareSection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CountryCompareSection.vue?vue&type=template&id=ab9d885a&scoped=true&\"\nimport script from \"./CountryCompareSection.vue?vue&type=script&lang=js&\"\nexport * from \"./CountryCompareSection.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ab9d885a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataSwitch.vue?vue&type=style&index=0&id=dce651f4&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dropdown\"},[_c('button',{staticClass:\"btn btn-secondary dropdown-toggle btn-sm\",class:{disabled: _vm.disabled},attrs:{\"type\":\"button\",\"id\":\"dropdownMenu\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\"}},[_vm._v(_vm._s(_vm.disabled ? _vm.$t('dataSwitch.number') : _vm.$t('dataSwitch.'+_vm.dataType)))]),_c('div',{staticClass:\"dropdown-menu\",attrs:{\"aria-labelledby\":\"dropdownMenu\"}},_vm._l((_vm.options),function(type){return _c('div',{key:type},[(type==='#')?_c('div',{staticClass:\"dropdown-divider\"}):_c('button',{staticClass:\"dropdown-item\",class:{active: _vm.dataType===type},attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('typeChange',type)}}},[_vm._v(_vm._s(_vm.$t('dataSwitch.'+type)))])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"dropdown\">\n    <button\n      class=\"btn btn-secondary dropdown-toggle btn-sm\"\n      :class=\"{disabled: disabled}\"\n      type=\"button\"\n      id=\"dropdownMenu\"\n      data-toggle=\"dropdown\"\n      aria-haspopup=\"true\"\n      aria-expanded=\"false\"\n    >{{ disabled ? $t('dataSwitch.number') : $t('dataSwitch.'+dataType) }}</button>\n    <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenu\">\n      <div v-for=\"type of options\" :key=\"type\">\n        <div v-if=\"type==='#'\" class=\"dropdown-divider\"></div>\n        <button\n          v-else\n          class=\"dropdown-item\"\n          type=\"button\"\n          :class=\"{active: dataType===type}\"\n          @click=\" $emit('typeChange',type) \"\n        >{{ $t('dataSwitch.'+type) }}</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"DataSwitch\",\n  props: [\"dataType\", \"disabled\", \"isUk\"],\n  data: function () {\n    return {\n      options: [],\n    };\n  },\n  mounted() {\n    this.updateOptions();\n  },\n  methods: {\n    updateOptions() {\n      if(this.isUk){\n        this.options = [\"confirmed\", \"death\", \"confirmedNew\", \"deathNew\", \"#\", \"confirmedRate\", \"deathRate\", \"dRate\"]\n      }else{\n        this.options = [\"confirmed\", \"active\", \"death\", \"cured\", \"#\", \"dRate\", \"cRate\"]\n      }\n    }\n  },\n  watch: {\n    dataType() {\n      window.ga(\"send\", \"event\", \"data-switch\", \"type-changed\", this.dataType);\n    },\n    isUk() {\n      this.updateOptions();\n    }\n  },\n};\n</script>\n\n<style scoped>\n.dropdown-menu {\n  box-shadow: 0px 10px 20px -2px rgba(0, 0, 0, 0.1);\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataSwitch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataSwitch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataSwitch.vue?vue&type=template&id=dce651f4&scoped=true&\"\nimport script from \"./DataSwitch.vue?vue&type=script&lang=js&\"\nexport * from \"./DataSwitch.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DataSwitch.vue?vue&type=style&index=0&id=dce651f4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dce651f4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}